# OpenWrt智能监控（青龙面板专属V1）
一套「检测+推送+每日汇总+自动清理」的OpenWrt监控脚本，适配青龙面板，支持手动终止兼容、时段精准控制。

## 📋 文件说明
| 文件名                | 核心作用                                                                 | 青龙定时规则       | 运行时段限制 |
|-----------------------|--------------------------------------------------------------------------|--------------------|--------------|
| `detect_script.py`    | 0-22点随机检测N次，结果写入JSON，手动终止可保存已检测数据                 | `0 */1 * * *`      | 0-22点       |
| `push_script.py`      | 0-22点汇总检测结果，推送企业微信+归档，手动终止可完成归档                 | `0 */3 * * *`      | 0-22点       |
| `daily_summary.py`    | 22:45推送最终日报，生成MD报告，清理所有文档，手动终止可强制清理           | `45 22 * * *`      | 仅22:45      |
| `config.py`           | 全局配置（企业微信/检测目标/策略），**本地保留，不上传GitHub**             | 无                 | 无           |
| `.gitignore`          | 忽略敏感文件，避免泄露企业微信密钥等信息                                 | 无                 | 无           |

## 🚀 青龙面板部署
### 1. 新增订阅
- 名称：OpenWrt智能监控V1
- 链接：`https://github.com/你的用户名/openwrt-monitor-V1.git`
- 黑名单：`config.py`（防止更新覆盖配置）

### 2. 配置定时任务
- 检测脚本：`0 */1 * * *`（每1小时触发，可自定义）
- 推送脚本：`0 */3 * * *`（每3小时触发，可自定义）
- 每日汇总脚本：`45 22 * * *`（固定22:45触发）

### 3. 配置文件
复制`config.example.py`为`config.py`，填入：
- 企业微信CORP_ID/CORP_SECRET/AGENT_ID
- 要监控的域名/IP端口
- 检测次数/时间范围等策略参数

## ✨ 核心特性
1. **手动终止兼容**：任意环节停止脚本，数据不丢失、流程能跑通；
2. **时段精准控制**：仅0-22点运行检测/推送，22:45执行汇总清理；
3. **数据闭环**：检测→推送→归档→汇总→清理，无文件堆积；
4. **隐私保护**：`.gitignore`自动忽略敏感配置，不上传GitHub；
5. **低负载**：脚本均为「触发→运行→退出」模式，适配青龙/Docker。

## ⚠️ 注意事项
1. `config.py` 本地保留，切勿上传至公共仓库；
2. 定时规则可根据需求调整（如检测改为每2小时1次）；
3. 22:45汇总后自动清理所有文档，次日0点重新初始化。